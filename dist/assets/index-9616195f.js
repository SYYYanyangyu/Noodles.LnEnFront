import{Q as m,d as M,u as j,a as Q,r as v,c as L,R as G,e as i,o as H,f as J,m as d,g as e,w as t,j as r,N as k,t as C,F as K,E as N,S as O,p as P,k as W,_ as X}from"./index-e586b318.js";const Y=n=>m.post("/Listening.Admin/Album/Add",n),Z=n=>m.get(`/Listening.Admin/Album/FindByCategoryId/${n}`),ee=n=>m.get(`/Listening.Admin/Album/FindById/${n}`),te=(n,f)=>m.put(`/Listening.Admin/Album/Update/${n}`,f),ae=n=>m.delete(`/Listening.Admin/Album/DeleteById/${n}`),le=n=>(P("data-v-8d9e1192"),n=n(),W(),n),se={class:"listentype_container"},ne={class:"card-header"},oe=le(()=>d("span",null,"分类管理",-1)),ie={class:"type-table"},de={class:"type-pagenation"},ce={class:"type_modal"},re={class:"dialog-footer"},ue=M({__name:"index",setup(n){let f=j(),g=Q();const y=v("添加"),u=v(!1),$=v([]),o=L({english:"",chinese:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:"",currentId:"",categoryId:g.query.id}),_=L({name:{english:"",chinese:""},categoryId:g.query.id});G(async()=>{const l=g.query.id;await h(l)});const h=async l=>{let s=await Z(l);$.value=s},V=l=>l.name.chinese,I=l=>l.name.english,F=async()=>{_.name.english=o.english,_.name.chinese=o.chinese;let l=y.value;l=="修改"?await te(o.currentId,_):await Y(_),N({type:"success",message:`${l}完成`}),await h(o.categoryId)},w=async l=>{u.value=!0,y.value="修改";let s=await ee(l.id);o.english=s.name.english,o.chinese=s.name.chinese,o.currentId=l.id},z=async l=>{O.confirm("Are you sure to close this dialog?").then(async()=>{await ae(l.id),N({type:"success",message:"删除完成"}),await h(o.categoryId)}).catch(()=>{})},D=async l=>{f.push({path:"/listenadmin/episode",query:{id:l.id}})};return(l,s)=>{const c=i("el-button"),A=i("el-row"),x=i("el-card"),q=i("el-col"),p=i("el-table-column"),S=i("el-table"),T=i("el-pagination"),E=i("el-input"),B=i("el-form-item"),U=i("el-form"),R=i("el-dialog");return H(),J(K,null,[d("div",se,[e(A,null,{default:t(()=>[e(q,{span:24},{default:t(()=>[e(x,{class:"button-card"},{header:t(()=>[d("div",ne,[oe,e(A,{class:"mb-4"},{default:t(()=>[e(c,{type:"primary",onClick:s[0]||(s[0]=a=>u.value=!0)},{default:t(()=>[r("添加")]),_:1}),e(c,{type:"primary"},{default:t(()=>[r("排序")]),_:1})]),_:1})])]),_:1})]),_:1}),e(q,{span:24},{default:t(()=>[e(x,{class:"table-card"},{default:t(()=>[d("div",ie,[e(S,{data:$.value,style:{width:"100%"}},{default:t(()=>[e(p,{prop:"name",label:"中文标题",formatter:V},{default:t(({row:a})=>[d("span",{class:k(a.isVisible===!1?"strike":"")},C(V(a)),3)]),_:1}),e(p,{prop:"name",label:"英文标题",formatter:I},{default:t(({row:a})=>[d("span",{class:k(a.isVisible===!1?"strike":"")},C(I(a)),3)]),_:1}),e(p,{prop:"creationTime",label:"创建时间"},{default:t(({row:a})=>[d("span",{class:k(a.isVisible===!1?"strike":"")},C(a.creationTime),3)]),_:1}),e(p,{label:"操作"},{default:t(a=>[e(c,{size:"small",type:"danger",onClick:b=>z(a.row)},{default:t(()=>[r("删除")]),_:2},1032,["onClick"]),e(c,{size:"small",onClick:b=>w(a.row)},{default:t(()=>[r("修改")]),_:2},1032,["onClick"]),e(c,{size:"small",type:"primary",onClick:b=>w(a.row)},{default:t(()=>[r("显示音频")]),_:2},1032,["onClick"]),e(c,{size:"small",type:"primary",onClick:b=>D(a.row)},{default:t(()=>[r("管理专辑")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),d("div",de,[e(T,{small:"",background:"",layout:"prev, pager, next",total:50,class:"mt-4"})])]),_:1})]),_:1})]),_:1})]),d("div",ce,[e(R,{modelValue:u.value,"onUpdate:modelValue":s[4]||(s[4]=a=>u.value=a),title:y.value},{footer:t(()=>[d("span",re,[e(c,{onClick:s[3]||(s[3]=a=>u.value=!1)},{default:t(()=>[r("取消")]),_:1}),e(c,{type:"primary",onClick:F},{default:t(()=>[r(" 确认 ")]),_:1})])]),default:t(()=>[e(U,{model:o},{default:t(()=>[e(B,{label:"english title"},{default:t(()=>[e(E,{modelValue:o.english,"onUpdate:modelValue":s[1]||(s[1]=a=>o.english=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(B,{label:"chinese title"},{default:t(()=>[e(E,{modelValue:o.chinese,"onUpdate:modelValue":s[2]||(s[2]=a=>o.chinese=a),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])],64)}}});const _e=X(ue,[["__scopeId","data-v-8d9e1192"]]);export{_e as default};
