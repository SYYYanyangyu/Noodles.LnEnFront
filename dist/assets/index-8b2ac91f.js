import{Q as m,d as R,u as Q,r as b,c as x,R as W,e as i,o as G,f as H,m as r,g as e,w as t,j as c,F as J,E as I,S as K,p as O,k as P,_ as X}from"./index-e586b318.js";const Y=s=>m.post("/Listening.Admin/Category/Add",s),Z=(s,g)=>m.put(`/Listening.Admin/Category/Update/${s}`,g),ee=s=>m.delete(`/Listening.Admin/Category/DeleteById/${s}`),te=s=>m.get(`/Listening.Admin/Category/FindById/${s}`),le=()=>m.get("/Listening.Admin/Category/FindAll"),A=s=>(O("data-v-d1350d4f"),s=s(),P(),s),ae={class:"listentype_container"},oe={class:"card-header"},ne=A(()=>r("span",null,"分类管理",-1)),se={class:"type-table"},ie={class:"type-pagenation"},de={class:"type_modal"},ce=A(()=>r("div",{class:"el-upload__tip"}," jpg/png files with a size less than 500kb·· ",-1)),re={class:"dialog-footer"},C="140px",ue=R({__name:"index",setup(s){let g=Q();const p=b(!1),_=b("添加"),w=b([]),o=x({english:"",chinese:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:"",currentId:"",coverUrl:""}),f=x({name:{english:"",chinese:""},coverUrl:""});W(async()=>{await y()});const y=async()=>{let l=await le();w.value=l},L=async()=>{f.name.english=o.english,f.name.chinese=o.chinese;let l=_.value;l=="修改"?await Z(o.currentId,f):await Y(f),I({type:"success",message:`${l}完成`}),await y()},q=l=>l.name.chinese,E=l=>l.name.english,F=l=>l.lastModificationTime==null?"暂无修改":l.lastModificationTime,B=async l=>{p.value=!0,_.value="修改";let a=await te(l.id);o.english=a.name.english,o.chinese=a.name.chinese,o.currentId=l.id},N=async l=>{K.confirm("Are you sure to close this dialog?").then(async()=>{await ee(l.id),I({type:"success",message:"删除完成"}),await y()}).catch(()=>{})},T=async l=>{g.push({path:"/listenadmin/album",query:{id:l.id}})};return(l,a)=>{const d=i("el-button"),V=i("el-row"),k=i("el-card"),U=i("el-col"),u=i("el-table-column"),D=i("el-table"),M=i("el-pagination"),h=i("el-input"),v=i("el-form-item"),S=i("el-upload"),z=i("el-form"),j=i("el-dialog");return G(),H(J,null,[r("div",ae,[e(V,null,{default:t(()=>[e(U,{span:24},{default:t(()=>[e(k,{class:"button-card"},{header:t(()=>[r("div",oe,[ne,e(V,{class:"mb-4"},{default:t(()=>[e(d,{type:"primary",onClick:a[0]||(a[0]=n=>(_.value="添加",p.value=!0))},{default:t(()=>[c("添加")]),_:1}),e(d,{type:"primary"},{default:t(()=>[c("排序")]),_:1})]),_:1})])]),_:1})]),_:1}),e(U,{span:24},{default:t(()=>[e(k,{class:"table-card"},{default:t(()=>[r("div",se,[e(D,{data:w.value,style:{width:"100%"}},{default:t(()=>[e(u,{prop:"coverUrl",label:"封面",width:"180"}),e(u,{prop:"name",label:"中文标题",width:"200",formatter:q}),e(u,{prop:"name",label:"英文标题",formatter:E,width:"350"}),e(u,{prop:"creationTime",label:"创建时间"}),e(u,{prop:"lastModificationTime",label:"最近修改时间",formatter:F}),e(u,{label:"操作",width:"250",align:"right"},{default:t(n=>[e(d,{size:"small",onClick:$=>B(n.row)},{default:t(()=>[c("修改")]),_:2},1032,["onClick"]),e(d,{size:"small",type:"danger",onClick:$=>N(n.row)},{default:t(()=>[c("删除")]),_:2},1032,["onClick"]),e(d,{size:"small",type:"primary",onClick:$=>T(n.row)},{default:t(()=>[c("管理专辑")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),r("div",ie,[e(M,{small:"",background:"",layout:"prev, pager, next",total:50,class:"mt-4"})])]),_:1})]),_:1})]),_:1})]),r("div",de,[e(j,{modelValue:p.value,"onUpdate:modelValue":a[5]||(a[5]=n=>p.value=n),title:_.value},{footer:t(()=>[r("span",re,[e(d,{onClick:a[4]||(a[4]=n=>p.value=!1)},{default:t(()=>[c("取消")]),_:1}),e(d,{type:"primary",onClick:L},{default:t(()=>[c(" 确认 ")]),_:1})])]),default:t(()=>[e(z,{model:o},{default:t(()=>[e(v,{label:"英文标题","label-width":C},{default:t(()=>[e(h,{modelValue:o.english,"onUpdate:modelValue":a[1]||(a[1]=n=>o.english=n),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(v,{label:"中文标题","label-width":C},{default:t(()=>[e(h,{modelValue:o.chinese,"onUpdate:modelValue":a[2]||(a[2]=n=>o.chinese=n),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(v,{label:"coverUrl","label-width":C},{default:t(()=>[e(h,{modelValue:o.coverUrl,"onUpdate:modelValue":a[3]||(a[3]=n=>o.coverUrl=n),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(S,{class:"upload-demo",action:"http://localhost/FileService/Uploader/UploadImages","auto-upload":!0,"list-type":"picture"},{tip:t(()=>[ce]),default:t(()=>[e(d,{type:"primary"},{default:t(()=>[c("Click to upload")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])],64)}}});const me=X(ue,[["__scopeId","data-v-d1350d4f"]]);export{me as default};
